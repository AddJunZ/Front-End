## 安全相关
### XSS（Cross Site Script跨站脚本攻击）
> 指的是攻击者在网站上注入恶意的客户端代码，通过脚本对客户端页面修改，从而在用户浏览网页时，对用户浏览器进行控制或者获取用户隐私数据的一种攻击方式。

1. 反射型

反射型XSS只是把用户输入的数据“反射”给浏览器。通常需要攻击者诱导用户点击一个恶意链接、提交表单或者进入一个恶意网站时，注入脚本进入被攻击者的网站。

2. 存储型

存储型XSS会把用户输入的数据“存储”在服务器端，当浏览器请求数据时，脚本从服务器上传回并执行。

常见的场景是攻击者在论坛写一篇包含js代码的文章或评论，发表后，所有访问该文章或评论的用户，都会在浏览器中执行这段恶意的js代码。

3. 基于DOM

是指通过恶意脚本修改页面的DOM结构，是纯粹发生在客户端的攻击

4. XSS攻击的防范

    1. HttpOnly防止截取Cookie
    ```js
    // koa，在options中配置
    ctx.cookies.set(key, name, [options]);
    ```
    2. 输入检查，对信息进行检查、过滤、转义，一般是检查，而在一些前端框架中，都会有一份 decodingMap， 用于对用户输入所包含的特殊字符或标签进行编码或过滤，如 <，>，script，防止 XSS 攻击
    ```js
    const decodingMap = {
      '&lt;':'<',
      '&gt;':'>',
      '&quot;':'"',
      '&amp;':'&',
      '
      ':'\n';
    }
    ```
    3. 输出检查

### CSRF（Cross Site Request Forgery跨站请求伪造）
> 是指攻击者借助受害者的cookie片区服务器的信任，跨域在受害者毫不知情的情况下以受害者名义伪造请求发生给受攻击服务器，从而在并未授权的情况下窒息感在权限保护之下的操作。

1. 原理

    1. 用户登录A网站
    2. A网站确认身份（客户端得到cookie）
    3. B网站页面向A网站发起请求（携带A网站身份）

2. 防御

    1. 不让第三方网站使用用户的cookie。可以对cookie设置samesite属性。该属性表示cookie不随着跨域请求发生，设置只有同一站点的请求才能携带cookie。
    2. 使用token校验。cookie是发送时自动带上的，但不会主动带上token，所以对每次请求都带上token校验。
    3. 式样referer验证。通过验证referer来判断该请求是否为第三方网站发起的。


### SQL注入
> 是指把SQL命令插入到WEB表单提交或输入域名或页面请求的字符串，后台执行SQL语句时直接把前端传入的字段哪来做SQL查询。

1. 防御
    1. 使用动态拼接sql
    2. 过滤特殊符号




[link](https://mp.weixin.qq.com/s?src=11&timestamp=1584083447&ver=2213&signature=rC6eb2kdgndSg0ehWOhu0H0X3IqR8YF-*xqFNagZk*QoZXnnVW3iiKrumtFdlKnuzejrPRbFEhPq9Gmv8BVq8kDSKddocEExoZ4nkoT3eGRU4qL7aUi1M902eaVDcqfG&new=1)



